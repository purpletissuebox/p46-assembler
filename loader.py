import draftsman.blueprintable

data = [503316480, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 402653184, 0, 0, 0, 436207616, 0, 0, 0, 0, 0, 0, 0, 469762048, 0, 0, 0, 0, 0, 503316480, 0, 0, 0, 503316480, 0, 503316480, 0, 0, 0, 503316480, 0, 0, 0, 402653184, 0, 0, 0, 436207616, 0, 0, 0, 838860800, 0, 0, 0, 469762048, 0, 0, 0, 872415232, 0, 0, 0, 503316480, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 402653184, 0, 0, 0, 436207616, 0, 0, 0, 0, 0, 0, 0, 469762048, 0, 0, 0, 0, 0, 503316480, 0, 0, 0, 503316480, 0, 503316480, 0, 0, 0, 503316480, 0, 0, 0, 402653184, 0, 0, 0, 436207616, 0, 0, 0, 849838080, 0, 0, 0, 480739328, 0, 0, 0, 872841216, 327680, 262144, 229376, 503317507, 0, 96, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 402654220, 0, 384, 0, 436208641, 0, 32, 0, 0, 0, 0, 0, 469767170, 0, 1088, 0, 0, 0, 503317507, 0, 96, 0, 503317507, 0, 503321699, 0, 96, 0, 503317507, 0, 96, 0, 402658316, 0, 384, 0, 447184897, 0, 10982432, 0, 838861837, 0, 10982816, 0, 482902018, 0, 14226496, 5120, 885560334, 0, 10982848, 0, 503317507, 0, 96, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 402654220, 0, 384, 0, 436208641, 0, 32, 0, 0, 0, 0, 0, 469767170, 0, 1088, 0, 0, 0, 503317507, 0, 10977376, 0, 503317507, 0, 514298979, 0, 96, 0, 514294787, 0, 96, 0, 413635596, 0, 384, 0, 447184897, 0, 5152, 0, 838861837, 0, 10982816, 0, 482902018, 0, 14226496, 5120, 885560334, 0, 10982848, 0, 506692630, 0, 0, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 406029334, 0, 0, 0, 442827801, 0, 0, 0, 0, 0, 0, 0, 473175064, 0, 1024, 0, 0, 0, 506692630, 0, 0, 0, 506692630, 0, 506696726, 0, 0, 0, 506692630, 0, 0, 0, 406028310, 0, 5120, 0, 442827801, 0, 5120, 0, 838860800, 0, 0, 0, 475304984, 0, 0, 0, 876872727, 0, 0, 0, 506692630, 0, 0, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 406029334, 0, 0, 0, 442827801, 0, 0, 0, 0, 0, 0, 0, 473175064, 0, 1024, 0, 0, 0, 506692630, 0, 0, 0, 506692630, 0, 506696726, 0, 0, 0, 506692630, 0, 0, 0, 406028310, 0, 5120, 0, 436208640, 0, 5120, 0, 849575963, 0, 0, 0, 480482331, 0, 0, 0, 880083993, 5505046, 3375124, 10584083, 506692630, 0, 0, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 406029334, 0, 0, 0, 442827801, 0, 0, 0, 0, 0, 0, 0, 473175064, 0, 1024, 0, 0, 0, 506692630, 0, 0, 0, 506692630, 0, 506696726, 0, 0, 0, 506692630, 0, 0, 0, 406028310, 0, 5120, 0, 442827801, 0, 5120, 0, 838860800, 0, 0, 0, 475304984, 0, 0, 0, 876872727, 0, 0, 0, 506692630, 0, 0, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 406029334, 0, 0, 0, 442827801, 0, 0, 0, 0, 0, 0, 0, 473175064, 0, 1024, 0, 0, 0, 506692630, 0, 0, 0, 506692630, 0, 506696726, 0, 0, 0, 506692630, 0, 0, 0, 406033430, 0, 0, 0, 436207616, 0, 5120, 0, 849576987, 0, 5120, 0, 480477211, 0, 5120, 5120, 880088089, 5505046, 3380244, 10584083, 513804275, 0, 0, 0, 7569408, 0, 0, 0, 10491891, 0, 0, 0, 410222592, 0, 10486771, 0, 443548659, 0, 7831552, 0, 7342067, 0, 0, 0, 477435891, 660, 2035, 945, 7570287, 0, 508889009, 0, 98304, 0, 513968082, 945, 510658415, 0, 196608, 163840, 513905664, 0, 0, 0, 409994240, 0, 10485760, 0, 439354368, 0, 491520, 0, 839189359, 0, 230400, 0, 473241521, 0, 229376, 0, 877758319, 0, 327680, 0, 513902579, 0, 0, 0, 7569408, 0, 0, 0, 10491891, 0, 0, 0, 410222592, 0, 10486771, 0, 443548308, 0, 7831552, 0, 8390643, 0, 0, 0, 477434880, 0, 1024, 0, 230036, 726, 503645184, 0, 327680, 0, 513803264, 0, 510657536, 0, 0, 0, 513807360, 0, 0, 0, 409994240, 0, 10485760, 0, 446694400, 0, 491520, 0, 839353051, 0, 1024, 0, 480745179, 0, 0, 0, 883393561, 22, 20, 19, 513803990, 0, 0, 0, 7667712, 0, 0, 0, 10491606, 0, 0, 0, 410320896, 0, 10486486, 0, 436208342, 0, 10977280, 0, 10487510, 0, 0, 0, 480581334, 0, 1684, 0, 10716147, 0, 512034452, 0, 229376, 0, 514065408, 0, 510658547, 0, 0, 0, 514036736, 0, 0, 0, 409994240, 0, 10485760, 0, 443548672, 0, 491520, 0, 839353331, 0, 1024, 0, 477599380, 0, 0, 0, 880805875, 0, 0, 0, 513803990, 0, 0, 0, 7667712, 0, 0, 0, 10491606, 0, 0, 0, 410320896, 0, 10486486, 0, 436208408, 825, 10978072, 0, 12584662, 13631488, 12582912, 0, 480580608, 0, 1024, 0, 230168, 825, 503645184, 0, 393216, 425984, 513803264, 0, 510657536, 0, 0, 0, 513807360, 0, 0, 0, 409994240, 0, 10485760, 0, 449840128, 0, 491520, 0, 839353051, 0, 1024, 0, 485824219, 0, 0, 0, 888472601, 24, 22, 20, 513804089, 891, 0, 0, 7766016, 491520, 0, 0, 10491771, 0, 0, 0, 410484736, 0, 10486651, 0, 436208507, 0, 16220160, 0, 15730555, 0, 0, 0, 485824379, 0, 1816, 0, 15958742, 0, 516228888, 0, 327680, 0, 514197305, 792, 510658262, 0, 425984, 393216, 514135040, 0, 0, 0, 409994240, 0, 10485760, 0, 436208640, 0, 491520, 0, 839353046, 0, 1024, 0, 480581400, 0, 825, 792, 885327574, 0, 13631488, 12582912, 513804155, 0, 0, 0, 7831552, 0, 0, 0, 10491771, 0, 0, 0, 410484736, 0, 10486651, 0, 451937213, 0, 16221150, 957, 17827707, 0, 18874368, 17825792, 485823488, 0, 1024, 0, 230333, 990, 503645184, 0, 557056, 589824, 513803264, 0, 510657536, 0, 0, 0, 513807360, 0, 0, 0, 409994240, 0, 10485760, 0, 455083008, 0, 491520, 0, 839353051, 0, 1024, 0, 485824219, 0, 0, 0, 888472576, 0, 0, 0, 513804221, 1023, 0, 0, 7897088, 623252, 1023, 957, 10491903, 0, 0, 0, 410615808, 660, 10486783, 957, 436208639, 0, 20414464, 0, 19924991, 0, 0, 0, 490018815, 0, 1981, 0, 20153211, 0, 521471933, 0, 491520, 0, 514361310, 957, 510658427, 0, 589824, 557056, 514298880, 0, 0, 0, 409994240, 0, 10485760, 0, 436208640, 0, 491520, 0, 839353211, 0, 1024, 0, 485824445, 0, 990, 957, 890570619, 0, 18874368, 17825792, 514295741, 1023, 0, 0, 7897088, 622592, 0, 0, 10491903, 0, 0, 0, 410615808, 0, 10486783, 0, 436208276, 0, 20414464, 0, 20973567, 0, 0, 0, 490017792, 0, 1024, 0, 230036, 726, 503645184, 0, 655360, 720896, 513803264, 0, 510657536, 0, 0, 0, 513807360, 0, 0, 0, 409994240, 0, 10485760, 0, 443877243, 0, 10978303, 7668603, 855212758, 10978303, 20645755, 16351958, 480745471, 20644731, 16351958, 10978303, 893060987, 16351958, 23954431, 20644731, 506692630, 0, 0, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 406029334, 0, 0, 0, 442827801, 0, 0, 0, 0, 0, 0, 0, 473175064, 0, 1024, 0, 0, 0, 506692630, 0, 0, 0, 506692630, 0, 506696726, 0, 0, 0, 506692630, 0, 0, 0, 406028310, 0, 5120, 0, 442827801, 0, 5120, 0, 838860800, 0, 0, 0, 475304984, 0, 0, 0, 876872727, 0, 0, 0, 506692630, 0, 0, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 406029334, 0, 0, 0, 442827801, 0, 0, 0, 0, 0, 0, 0, 473175064, 0, 1024, 0, 0, 0, 506692630, 0, 0, 0, 506692630, 0, 506696726, 0, 0, 0, 506692630, 0, 0, 0, 406028310, 0, 5120, 0, 436208640, 0, 5120, 0, 849575963, 0, 0, 0, 480482331, 0, 0, 0, 880083993, 5505046, 3375124, 10584083, 441713720, 0, 0, 0, 0, 0, 570425344, 0, 5510168, 0, 0, 0, 671089760, 0, 5505048, 0, 5506232, 0, 805306368, 0, 676364308, 0, 570425568, 0, 671093760, 0, 570426368, 0, 441712920, 0, 402654208, 0, 510755062, 0, 1280, 0, 5344, 0, 637534368, 0, 1248, 0, 0, 0, 738197504, 0, 5120, 0, 437421076, 0, 5120, 0, 437420052, 0, 0, 0, 437425172, 0, 506691606, 0, 1184, 0, 503316704, 0, 441713944, 0, 0, 0, 0, 0, 570425728, 0, 5510168, 0, 0, 0, 671090144, 0, 5505048, 0, 5506072, 608, 805307008, 0, 676364308, 0, 570425344, 0, 671094368, 0, 570426368, 0, 441713144, 0, 402654208, 0, 510755382, 0, 1024, 0, 5120, 0, 637534208, 0, 1024, 0, 0, 0, 738197984, 0, 5120, 0, 437421396, 0, 5120, 0, 437420372, 0, 0, 0, 437425492, 0, 506691990, 0, 1024, 0, 503316480, 0, 441713688, 0, 256, 0, 224, 0, 570425600, 0, 5510264, 0, 0, 0, 671089664, 0, 5505304, 0, 5506296, 0, 805306624, 0, 676364404, 0, 570425344, 0, 671093760, 0, 570426368, 0, 441712824, 0, 402654208, 0, 510754998, 0, 1248, 0, 5280, 0, 637534304, 0, 1024, 0, 0, 0, 738197504, 0, 5120, 0, 437421236, 0, 5120, 0, 437420212, 0, 0, 0, 437425396, 0, 506691862, 0, 1024, 0, 503316800, 0, 441713688, 0, 0, 0, 384, 0, 570425344, 0, 5510168, 0, 480, 0, 671089664, 0, 5505048, 0, 5506680, 640, 805306368, 0, 679870491, 0, 570425952, 0, 671093760, 0, 570426368, 0, 441713144, 0, 402654208, 0, 506696726, 0, 506696726, 0, 1024, 0, 645207067, 0, 645207067, 0, 1024, 0, 749179935, 0, 749179935, 0, 1024, 0, 3072, 0, 3072, 0, 3072, 0, 3072, 0, 3072, 0, 3072, 0, 3072, 0, 503316480, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 402653184, 0, 0, 0, 436207616, 0, 0, 0, 0, 0, 0, 0, 469762048, 0, 0, 0, 0, 0, 503316480, 0, 0, 0, 503316480, 0, 503316480, 0, 0, 0, 503316480, 0, 0, 0, 402653184, 0, 0, 0, 436207616, 0, 0, 0, 838860800, 0, 0, 0, 469762048, 0, 0, 0, 872415232, 0, 0, 0, 503317507, 0, 96, 0, 0, 0, 0, 0, 5120, 0, 0, 0, 402654220, 0, 384, 0, 436208641, 0, 32, 0, 0, 0, 0, 0, 469767170, 0, 1088, 0, 0, 0, 503317507, 0, 96, 0, 503317507, 0, 503321699, 0, 96, 0, 503317507, 0, 96, 0, 402658316, 0, 384, 0, 436207617, 0, 5152, 0, 838861837, 0, 5536, 0, 469762050, 0, 5184, 5120, 872420366, 0, 5568, 0, 503809027, 425984, 491616, 16154624, 13959168, 15990784, 13959168, 10747904, 8721408, 10780672, 8650752, 10682368, 412189708, 8421376, 6619520, 3407872, 437453825, 10485760, 8650784, 6291456, 0, 8388608, 327680, 0, 469767170, 10485760, 33856, 0, 0, 1048576, 503415811, 0, 96, 3145728, 503481347, 0, 503321699, 5242880, 262240, 0, 503317507, 8388608, 327776, 0, 402658316, 10485760, 426368, 0, 436207617, 13631488, 332832, 0, 839287821, 10485760, 333216, 13631488, 470024194, 10485760, 201792, 8393728, 872682510, 6291456, 333248, 8388608, 516948995, 15728640, 96, 425984, 491520, 0, 0, 0, 13636608, 15728640, 0, 425984, 403145740, 0, 384, 0, 449840129, 15728640, 32, 425984, 19365888, 0, 15728640, 589824, 469767170, 491520, 13632576, 0, 15728640, 425984, 516948995, 491520, 10485856, 425984, 511706115, 327680, 513807459, 262144, 13631584, 327680, 511706115, 9863168, 8388704, 262144, 409244684, 262144, 3146112, 196608, 437256193, 98304, 3150880, 32768, 838861837, 98304, 6296992, 0, 469762050, 196608, 8393792, 5120, 872420366, 262144, 10491328, 0, 268698632, 0, 256, 0, 8486912, 0, 32768, 0, 3249152, 0, 1310720, 0, 170918917, 0, 8487072, 0, 201360390, 0, 3244224, 0, 1310720, 0, 3145728, 0, 243373063, 0, 34016, 0, 3244032, 0, 269747208, 0, 3145984, 0, 277185544, 0, 268440840, 0, 11960576, 0, 268436488, 0, 14090496, 0, 167777285, 0, 15171744, 0, 201326598, 0, 16323776, 0, 603980806, 0, 19371200, 0, 234881031, 0, 16061664, 431104, 637867015, 0, 10753248, 13631488, 346031114, 0, 10486080, 327680, 12582912, 327680, 1048576, 393216, 3150848, 32768, 5242880, 98304, 243270663, 163840, 10485984, 262144, 278922248, 327680, 12583168, 327680, 1048576, 393216, 3145728, 32768, 307237897, 98304, 7341344, 163840, 8388608, 229376, 346031114, 262144, 320, 327680, 349438986, 0, 349443402, 0, 320, 0, 349438986, 0, 320, 0, 248779783, 0, 224, 0, 282329096, 0, 5376, 0, 671089672, 0, 5376, 0, 316997641, 0, 5408, 5120, 704648201, 0, 5408, 0]

def get_good_signals(banned):
	banned_signals = draftsman.data.signals.pure_virtual + banned
	signal_list_p = draftsman.data.signals.item + draftsman.data.signals.fluid + draftsman.data.signals.virtual
	for vsig in banned_signals:
		signal_list_p.remove(vsig)
	return signal_list_p

def create_combinator(signal_lib, values, starting_sig, idx):
	comb = draftsman.entity.ConstantCombinator()
	n = 256 - starting_sig
	if n > 20:
		n = 20
	if idx + n > len(values):
		n = len(values) - idx
	
	for i in range(n):
		comb.set_signal(i, signal_lib[starting_sig + i], values[idx + i])
	return comb

def create_bank(host_bp, signal_lib, values, idx, ypos):
	n = (len(values) - idx + 19)//20
	if n > 13:
		n = 13
		
	for i in range(n):
		cur_comb = create_combinator(signal_lib, values, i*20, idx + i*20)
		cur_comb.tile_position = [i, ypos]
		host_bp.entities.append(cur_comb)
		if i > 0:
			host_bp.add_circuit_connection("red", ypos*14+i-1, i+ypos*14)
	
	i += 1
	bank_select = draftsman.entity.DeciderCombinator()
	bank_select.direction = 2
	bank_select.tile_position = [13, ypos]
	bank_select.set_decider_conditions("signal-B", "=", ypos+1, "signal-everything", True)
	host_bp.entities.append(bank_select)
	host_bp.add_circuit_connection("red", ypos*14+i-1, i+ypos*14)

def create_array(host_bp, signal_lib, values):
	n = (len(values)+255)//256
	for i in range(n):
		create_bank(host_bp, signal_lib, values, i<<8, i)

def main():
	bp = draftsman.blueprintable.Blueprint()
	signal_list = get_good_signals(["signal-A", "signal-B"])
	create_array(bp, signal_list, data)
	print(bp.to_string())

main()